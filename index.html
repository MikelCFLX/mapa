<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onda Dinámica</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    body {
      background-color: rgb(97, 226, 231); /* Fondo azul */
    }

    .container {
      position: relative;
      width: 100%;
      height: 300px;
      overflow: hidden;
    }

    #wave {
      width: 100%;
      height: 100px;
      position: absolute;
      bottom: 0;
      left: 0;
      z-index: 10;
    }

    .content {
      position: absolute;
      top: 100px;
      left: 0;
      width: 100%;
      height: calc(100% - 100px);
      background-color: #2a6380; /* Color de fondo del contenido */
      z-index: 1;
    }
  </style>
</head>
<body>
  <div class="container">
    <svg id="wave"></svg>
    <div class="content"></div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js"></script>
  <script>
    var s = Snap('#wave');
    var wave = s.paper.path('').attr({
      fill: '#2a6380',
    });

    var lastUpdate = +new Date;
    var RAIN_COUNT = 6;
    var NUM_POINTS = 180;
    var WIDTH = window.innerWidth;
    var X_OFFSET = 0;
    var SPRING_CONSTANT = 0.005;
    var SPRING_CONSTANT_BASELINE = 0.005;
    var Y_OFFSET = 30;
    var DAMPING = 0.99;
    var ITERATIONS = 10;
    var offset = 0;
    var NUM_BACKGROUND_WAVES = 5;
    var BACKGROUND_WAVE_MAX_HEIGHT = 2;
    var BACKGROUND_WAVE_COMPRESSION = 1 / 20;
    var sineOffsets = [];
    var sineAmplitudes = [];
    var sineStretches = [];
    var offsetStretches = [];
    var wavePoints = makeWavePoints(NUM_POINTS);

    function init() {
      for (var i = 0; i < NUM_BACKGROUND_WAVES; i++) {
        sineOffsets.push(-Math.PI + 2 * Math.PI * Math.random());
        sineAmplitudes.push(Math.random() * BACKGROUND_WAVE_MAX_HEIGHT);
        sineStretches.push(Math.random() * BACKGROUND_WAVE_COMPRESSION);
        offsetStretches.push(Math.random() * BACKGROUND_WAVE_COMPRESSION);
      }
    }

    function makeWavePoints(numPoints) {
      var t = [];
      for (var n = 0; n < numPoints + 1; n++) {
        t.push({
          x: n / numPoints * WIDTH + X_OFFSET,
          y: Y_OFFSET,
          spd: { y: 0 },
          mass: 2
        });
      }
      return t;
    }

    function overlapSines(x) {
      var result = 0;
      for (var i = 0; i < NUM_BACKGROUND_WAVES; i++) {
        result += sineOffsets[i] + sineAmplitudes[i] * Math.sin(x * sineStretches[i] + offset * offsetStretches[i]);
      }
      return result;
    }

    function updateWavePoints(points, dt) {
      for (var i = 0; i < ITERATIONS; i++) {
        for (var n = 0; n < points.length; n++) {
          var p = points[n];
          var force = 0;
          var forceFromLeft, forceFromRight;

          if (n == 0) {
            forceFromLeft = SPRING_CONSTANT * (points[points.length - 1].y - p.y);
          } else {
            forceFromLeft = SPRING_CONSTANT * (points[n - 1].y - p.y);
          }
          if (n == points.length - 1) {
            forceFromRight = SPRING_CONSTANT * (points[0].y - p.y);
          } else {
            forceFromRight = SPRING_CONSTANT * (points[n + 1].y - p.y);
          }

          var forceToBaseline = SPRING_CONSTANT_BASELINE * (Y_OFFSET - p.y);
          force = forceFromLeft + forceFromRight + forceToBaseline;
          var acceleration = force / p.mass;
          p.spd.y = DAMPING * p.spd.y + acceleration;
          p.y += p.spd.y;
        }
      }
    }

    function drawWave(dt) {
      offset += 1;
      updateWavePoints(wavePoints, dt);

      var path = [];
      for (var n = 0; n < wavePoints.length; n++) {
        var p = wavePoints[n];
        if (n == 0) {
          path.push('M' + p.x + ' ' + (p.y + overlapSines(p.x)));
        } else {
          path.push('L' + p.x + ' ' + (p.y + overlapSines(p.x)));
        }
      }
      path.push('L' + WIDTH + ' ' + (Y_OFFSET + 100));
      path.push('L0 ' + (Y_OFFSET + 100));
      path.push('Z');

      wave.attr({
        path: path.join(' ')
      });
    }

    function run() {
      var now = +new Date;
      var dt = now - lastUpdate;
      lastUpdate = now;
      drawWave(dt);
      requestAnimationFrame(run);
    }

    init();
    run(); // Inicia la animación automáticamente
  </script>
</body>
</html>
